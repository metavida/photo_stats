<!DOCTYPE html>
<html>
<head>
  <title>One Year</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.7.1/nv.d3.min.css" />
  <link rel="stylesheet" href="/css/override.css" />

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.7.1/nv.d3.js"></script>

</head>
<body>
<h1>One Year of Photos</h1>
<p>One year ago I had the amazing pleasure of updating <a href="http://arethetwinsbornyet.wrightkuhns.com">arethetwinsbornyet.wrightkuhns.com</a></p>
<div id="total_chart" class="photo-line hide-x">
  <div class="xaxis"><div></div></div>
</div>
<div id="dow_chart" class="photo-line hide-x hide-y">
  <div class="xaxis"><div></div></div>
</div>

<script type="text/javascript">
//nv.log = function() {
//  args = [];
//  for (var i = 0; i < arguments.length; i++) { args.push(arguments[i]); }
//  console.log(args);
//}

d3.csv("data/cumulative_total.csv")
  .row(function(d) {
    return {key: d['day'], value: parseInt(d['count'], 10) }
  })

  .get(function(error,data) {
    nv.addGraph(function() {
      var chart = nv.models.lineChart()
            .margin(0)
            .x(function(d,i) { return i })
            .y(function(d,i) { return d.value })
            .interpolate('cardinal')
            ;
      chart.xAxis
          .showMaxMin(false)
          .tickFormat(function(d) {
            d = new Date(data[d].key);
            return d3.time.format('%d %b %Y')(d)
          })
          ;

      chart.yAxis
          .showMaxMin(false)
          .tickFormat(d3.format(',r'))
          ;

      d3.select('#total_chart')
        .append('svg')
        .attr('style', '')
        .datum([{ values: data, key: 'Number of Photos', area: true }])
        .transition()
        .duration(0)
        .call(chart)
        ;

      nv.utils.windowResize(chart.update);

      return chart;
    })
  })

  ;

var dow_data;
d3.csv("data/per_day_of_week.csv")
  .row(function(d) {
    return {key: d['day'], value: parseInt(d['count'], 10) }
  })
  .get(function(error,data) {

    dow_data = data;

    nv.addGraph(function() {
      var chart = nv.models.lineChart()
            .margin(0)
            .x(function(d,i) { d = new Date('2015','02',i+2); return d })
            .y(function(d,i) { return d.value })
            .interpolate('cardinal')
            ;

      chart.xAxis
          .showMaxMin(false)
          .tickFormat(function(d) { return d3.time.format('%A')(new Date(d)) })
          ;

      chart.yAxis
          .showMaxMin(false)
          .tickFormat(d3.format(',r'))
          //.scale().domain([0, )
          //.scale().domain([10, 1000])
          ;

      chart.forceY([d3.min(data.map(function(d) { return d.value })) - 500, 1000]);

      d3.select('#dow_chart')
        .append('svg')
        .attr('style', 'width: 100%;')
        .datum([{ values: data, key: 'Photos by Day of the Week', area: true }])
        .transition()
        .duration(0)
        .call(chart)
        ;

      nv.utils.windowResize(chart.update);

      return chart;
    });
  })
  ;


</script>
</body>
</html>